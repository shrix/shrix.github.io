(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{3656:function(e,t,a){Promise.resolve().then(a.bind(a,5055))},5055:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),r=a(2265);function l(){let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e="true"===localStorage.getItem("darkMode")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;t(e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),(0,s.jsx)("button",{onClick:()=>{let a=!e;t(a),localStorage.setItem("darkMode",a.toString()),a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},className:"p-[2px] rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",title:e?"Switch to light mode":"Switch to dark mode",children:e?(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,s.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,s.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,s.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,s.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,s.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,s.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,s.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,s.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}function n(e){let{collapsed:t,setCollapsed:a,openSettings:n}=e,[o,i]=(0,r.useState)("gpt"),[d,c]=(0,r.useState)("API Key Reqd for ChatGPT"),[g,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)("ChatGPT 4o Mini"),[x,p]=(0,r.useState)({gpt:[],claude:[],gemini:[]});(0,r.useEffect)(()=>{let e=localStorage.getItem("gpt-api-key"),t=localStorage.getItem("claude-api-key"),a=localStorage.getItem("gpt-model")||"gpt-4o-mini",s=localStorage.getItem("claude-model")||"claude-instant";if("gpt"===o)switch(c(e?"OpenAI API Key set":"API Key Reqd for OpenAI"),a){case"gpt-4o-mini":h("ChatGPT 4o Mini");break;case"gpt-3.5-turbo":h("ChatGPT 3.5 Turbo");break;case"gpt-4":h("ChatGPT 4");break;case"gpt-4-turbo":h("ChatGPT 4 Turbo");break;case"gpt-4o":h("ChatGPT 4o");break;default:h("ChatGPT")}else if("claude"===o)switch(c(t?"Anthropic API Key set":"API Key Reqd for Anthropic"),s){case"claude-instant":h("Claude Instant");break;case"claude-3-haiku":h("Claude 3 Haiku");break;case"claude-3-sonnet":h("Claude 3 Sonnet");break;case"claude-3-opus":h("Claude 3 Opus");break;default:h("Claude")}else c("Gemini Flash 2.0 (Free)"),h("Gemini Flash 2.0")},[o]),(0,r.useEffect)(()=>{let e=()=>{try{let e=JSON.parse(localStorage.getItem("gpt-messages")||"[]"),t=JSON.parse(localStorage.getItem("claude-messages")||"[]"),a=JSON.parse(localStorage.getItem("gemini-messages")||"[]");p({gpt:e,claude:t,gemini:a})}catch(e){console.error("Error loading chat history:",e)}};e();let t=()=>{e()};window.addEventListener("storage",t);let a=()=>{e()};return window.addEventListener("messagesUpdated",a),()=>{window.removeEventListener("storage",t),window.removeEventListener("messagesUpdated",a)}},[]),(0,r.useEffect)(()=>{let e=()=>{"gpt"===o?localStorage.getItem("gpt-model")&&i(e=>"gpt"===e?(setTimeout(()=>i("gpt"),0),"gpt-temp"):e):"claude"===o&&localStorage.getItem("claude-model")&&i(e=>"claude"===e?(setTimeout(()=>i("claude"),0),"claude-temp"):e)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[o]),(0,r.useEffect)(()=>{if("gpt-temp"!==o&&"claude-temp"!==o){localStorage.setItem("selectedModel",o);let e=new CustomEvent("modelChanged",{detail:{model:o}});window.dispatchEvent(e)}},[o]);let y=e=>{if(0===e.length)return"New Chat";let t=e.find(e=>"user"===e.role);if(!t)return"New Chat";let a=t.content;return a.length>25&&(a=a.substring(0,25)+"..."),a},v=!t||g;return(0,s.jsxs)("div",{className:"sidebar-container ".concat(v?"w-64":"w-0"," transition-all duration-300 ease-in-out relative"),onMouseLeave:()=>u(!1),children:[(0,s.jsxs)("div",{className:"sidebar fixed h-full bg-slate-50 dark:bg-gray-800 border-r dark:border-gray-700 p-4 flex flex-col ".concat(v?"w-64 opacity-100":"w-0 opacity-0 overflow-hidden"),onMouseEnter:()=>u(!0),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Chat"}),(0,s.jsxs)("div",{className:"flex items-center gap-[2px]",children:[(0,s.jsx)(l,{}),(0,s.jsx)("button",{className:"p-[2px] rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",onClick:n,title:"Settings",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}),(0,s.jsx)("button",{className:"p-[2px] rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>a(!t),title:t?"Pin sidebar":"Unpin sidebar",children:t?(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,s.jsx)("polyline",{points:"14 7 19 12 14 17"}),(0,s.jsx)("line",{x1:"19",y1:"4",x2:"19",y2:"20",strokeOpacity:"0.8"})]}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,s.jsx)("polyline",{points:"10 7 5 12 10 17"}),(0,s.jsx)("line",{x1:"5",y1:"4",x2:"5",y2:"20",strokeOpacity:"0.8"})]})})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Model"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 p-2",value:o,onChange:e=>{i(e.target.value)},children:[(0,s.jsx)("option",{value:"gpt",children:"OpenAI (API Key)"}),(0,s.jsx)("option",{value:"claude",children:"Anthropic (API Key)"}),(0,s.jsx)("option",{value:"gemini",children:"Gemini Flash 2.0 (Free)"})]}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Using: ",m]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,s.jsxs)("button",{className:"w-full text-left px-4 py-2 mb-4 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md flex items-center",onClick:()=>{if(confirm("Start a new chat with ".concat(m,"? Your current conversation will remain in history."))){let e=new CustomEvent("newChat",{detail:{model:o}});window.dispatchEvent(e)}},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,s.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,s.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Chat"]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold px-2 mb-2",children:"Chat History"}),x.gpt.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center px-2 mb-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"OpenAI"})]}),x.gpt.length>0&&(0,s.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm truncate ".concat("gpt"===o?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"," rounded-md"),onClick:()=>i("gpt"),children:y(x.gpt)})]}),x.claude.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center px-2 mb-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500 mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Anthropic"})]}),x.claude.length>0&&(0,s.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm truncate ".concat("claude"===o?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"," rounded-md"),onClick:()=>i("claude"),children:y(x.claude)})]}),x.gemini.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center px-2 mb-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Gemini"})]}),x.gemini.length>0&&(0,s.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm truncate ".concat("gemini"===o?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"," rounded-md"),onClick:()=>i("gemini"),children:y(x.gemini)})]}),0===x.gpt.length&&0===x.claude.length&&0===x.gemini.length&&(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center px-2",children:"No chat history yet"})]})]}),(0,s.jsx)("div",{className:"mt-auto pt-4 border-t dark:border-gray-700",children:(0,s.jsx)("div",{className:"text-sm text-amber-600 dark:text-amber-400 text-center",children:d})})]}),t&&(0,s.jsx)("div",{className:"fixed top-0 left-0 w-16 h-full z-10",onMouseEnter:()=>u(!0)})]})}function o(e){let{onClose:t}=e,[a,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)("gpt"),[c,g]=(0,r.useState)("gpt-4o-mini"),[u,m]=(0,r.useState)("claude-instant"),h=(0,r.useRef)(null);return(0,r.useEffect)(()=>{l(localStorage.getItem("gpt-api-key")||""),o(localStorage.getItem("claude-api-key")||""),d(localStorage.getItem("selectedModel")||"gpt"),g(localStorage.getItem("gpt-model")||"gpt-4o-mini"),m(localStorage.getItem("claude-model")||"claude-instant");let e=e=>{"Escape"===e.key&&t()},a=e=>{h.current&&!h.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("mousedown",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("mousedown",a)}},[t]),(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{ref:h,className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"API Key Settings"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300","aria-label":"Close",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M18 6 6 18"}),(0,s.jsx)("path",{d:"m6 6 12 12"})]})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:["gpt"===i&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"gpt-key",className:"text-right",children:"OpenAI API Key"}),(0,s.jsx)("input",{id:"gpt-key",type:"password",className:"col-span-3 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",placeholder:"sk-...",value:a,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"gpt-model",className:"text-right",children:"Model"}),(0,s.jsxs)("select",{id:"gpt-model",className:"col-span-3 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",value:c,onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{value:"gpt-4o-mini",children:"GPT-4o Mini"}),(0,s.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,s.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,s.jsx)("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),(0,s.jsx)("option",{value:"gpt-4o",children:"GPT-4o"})]})]}),(0,s.jsx)("div",{className:"col-span-4 text-xs text-gray-500 dark:text-gray-400 text-right",children:"GPT-4o Mini and GPT-3.5 Turbo are more cost-effective options"})]}),"claude"===i&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"claude-key",className:"text-right",children:"Anthropic API Key"}),(0,s.jsx)("input",{id:"claude-key",type:"password",className:"col-span-3 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",placeholder:"sk-ant-...",value:n,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"claude-model",className:"text-right",children:"Model"}),(0,s.jsxs)("select",{id:"claude-model",className:"col-span-3 p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",value:u,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"claude-instant",children:"Claude Instant"}),(0,s.jsx)("option",{value:"claude-3-haiku",children:"Claude 3 Haiku"}),(0,s.jsx)("option",{value:"claude-3-sonnet",children:"Claude 3 Sonnet"}),(0,s.jsx)("option",{value:"claude-3-opus",children:"Claude 3 Opus"})]})]}),(0,s.jsx)("div",{className:"col-span-4 text-xs text-gray-500 dark:text-gray-400 text-right",children:"Claude Instant is the most cost-effective option"})]}),"gemini"===i&&(0,s.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-md",children:[(0,s.jsx)("p",{className:"text-sm",children:"Gemini Flash 2.0 Experimental is available for free through Google AI Studio."}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"No API key required for this model."})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("gpt-api-key",a),localStorage.setItem("claude-api-key",n),localStorage.setItem("gpt-model",c),localStorage.setItem("claude-model",u),t()},className:"bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"gemini"===i?"OK":"Save changes"})})]})})}function i(e){let{children:t}=e,[a,l]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"flex h-screen bg-white dark:bg-gray-900 dark:text-white",children:[(0,s.jsx)(n,{collapsed:i,setCollapsed:d,openSettings:()=>l(!0)}),(0,s.jsx)("main",{className:"flex-1 flex flex-col",children:t}),a&&(0,s.jsx)(o,{onClose:()=>l(!1)})]})}function d(e){let{role:t,content:a,modelType:l="gpt"}=e,[n,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"".concat("user"===t?"user-message":"assistant-message"," relative group"),children:["assistant"===t&&(0,s.jsxs)("div",{className:"absolute -left-2 top-0 flex items-center",children:[(0,s.jsx)("div",{className:"w-1 h-full ".concat((()=>{switch(l){case"gpt":return"bg-green-500";case"claude":return"bg-purple-500";case"gemini":return"bg-blue-500";default:return"bg-gray-500"}})())}),(0,s.jsx)("div",{className:"absolute -left-1 top-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("div",{className:"ml-4 px-2 py-1 bg-white dark:bg-gray-800 rounded shadow-md text-xs",children:(()=>{switch(l){case"gpt":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return"AI"}})()})})]}),(0,s.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(a),o(!0),setTimeout(()=>o(!1),2e3)},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:"Copy to clipboard",children:n?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"M20 6 9 17l-5-5"})}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})})}),(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:a})]})}function c(e){let{messages:t,isLoading:a,modelType:l="gpt"}=e,n=(0,r.useRef)(null);(0,r.useEffect)(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[t]);let o=()=>{switch(l){case"gpt":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";case"claude":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";case"gemini":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}};return(0,s.jsxs)("div",{ref:n,className:"chat-container flex-1 space-y-4 p-4 overflow-y-auto",children:[0===t.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:(()=>{switch(l){case"gpt":return"Welcome to ChatGPT";case"claude":return"Welcome to Claude";case"gemini":return"Welcome to Gemini";default:return"Welcome to Chat"}})()}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Type a message below to start chatting!"})]})}):t.map((e,t)=>"system"===e.role&&"--- New Chat ---"===e.content?(0,s.jsx)("div",{className:"flex justify-center my-6",children:(0,s.jsx)("div",{className:"px-4 py-1 rounded-full text-sm ".concat(o()),children:"New Chat"})},t):(0,s.jsx)(d,{role:e.role,content:e.content,modelType:l},t)),a&&(0,s.jsx)("div",{className:"assistant-message flex items-center",children:(0,s.jsx)("div",{className:"loading"})})]})}function g(e){let{onSendMessage:t,isLoading:a}=e,[l,n]=(0,r.useState)(""),o=(0,r.useRef)(null);(0,r.useEffect)(()=>{o.current&&(o.current.style.height="auto",o.current.style.height="".concat(Math.min(o.current.scrollHeight,200),"px"))},[l]);let i=e=>{e.preventDefault(),l.trim()&&!a&&(t(l),n(""),o.current&&(o.current.style.height="auto"))};return(0,s.jsx)("div",{className:"border-t dark:border-gray-700 p-4 mt-auto",children:(0,s.jsxs)("form",{onSubmit:i,className:"message-input-container",children:[(0,s.jsx)("textarea",{ref:o,className:"w-full min-h-[48px] p-3 pr-12 border rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600",placeholder:"Type your message...",value:l,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i(e))},disabled:a,rows:1}),(0,s.jsx)("button",{type:"submit",className:"send-button-claude",disabled:a||!l.trim(),"aria-label":"Send message",children:(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:l.trim()?"#4B5563":"#9CA3AF"}),(0,s.jsx)("path",{d:"M12 16V8M8 12l4-4 4 4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})})}function u(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)("gpt"),[x,p]=(0,r.useState)("gpt-4o-mini"),[y,v]=(0,r.useState)("claude-instant");(0,r.useEffect)(()=>{let e=localStorage.getItem("selectedModel"),a=localStorage.getItem("gpt-model"),s=localStorage.getItem("claude-model"),r=localStorage.getItem("gpt-messages"),n=localStorage.getItem("claude-messages"),i=localStorage.getItem("gemini-messages");if(e&&h(e),a&&p(a),s&&v(s),r)try{t(JSON.parse(r))}catch(e){console.error("Error parsing stored GPT messages:",e)}if(n)try{l(JSON.parse(n))}catch(e){console.error("Error parsing stored Claude messages:",e)}if(i)try{o(JSON.parse(i))}catch(e){console.error("Error parsing stored Gemini messages:",e)}},[]),(0,r.useEffect)(()=>{let e=e=>{"selectedModel"===e.key?h(e.newValue||"gpt"):"gpt-model"===e.key?p(e.newValue||"gpt-4o-mini"):"claude-model"===e.key&&v(e.newValue||"claude-instant")},a=e=>{h(e.detail.model)},s=e=>{switch(e.detail.model){case"gpt":t(e=>{if(0===e.length)return e;let t=e[e.length-1];return"system"===t.role&&"--- New Chat ---"===t.content?e:[...e,{role:"system",content:"--- New Chat ---"}]});break;case"claude":l(e=>{if(0===e.length)return e;let t=e[e.length-1];return"system"===t.role&&"--- New Chat ---"===t.content?e:[...e,{role:"system",content:"--- New Chat ---"}]});break;case"gemini":o(e=>{if(0===e.length)return e;let t=e[e.length-1];return"system"===t.role&&"--- New Chat ---"===t.content?e:[...e,{role:"system",content:"--- New Chat ---"}]})}};return window.addEventListener("storage",e),window.addEventListener("modelChanged",a),window.addEventListener("newChat",s),()=>{window.removeEventListener("storage",e),window.removeEventListener("modelChanged",a),window.removeEventListener("newChat",s)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("gpt-messages",JSON.stringify(e)),window.dispatchEvent(new Event("messagesUpdated"))},[e]),(0,r.useEffect)(()=>{localStorage.setItem("claude-messages",JSON.stringify(a)),window.dispatchEvent(new Event("messagesUpdated"))},[a]),(0,r.useEffect)(()=>{localStorage.setItem("gemini-messages",JSON.stringify(n)),window.dispatchEvent(new Event("messagesUpdated"))},[n]);let w=()=>{switch(m){case"gpt":return e;case"claude":return a;case"gemini":return n;default:return[]}},b=e=>{switch(m){case"gpt":t(e);break;case"claude":l(e);break;case"gemini":o(e)}},f=async e=>{b([...w(),{role:"user",content:e}]),u(!0);try{let t="gpt"===m?x:"claude"===m?y:"gemini-flash-2",a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json","x-gpt-model":x,"x-claude-model":y},body:JSON.stringify({message:e,model:m,apiKey:localStorage.getItem("".concat(m,"-api-key"))||"",modelVersion:t})});if(!a.ok)throw Error("Failed to send message");let s=await a.json(),r={role:"assistant",content:s.content};b([...w(),r])}catch(e){console.error("Error sending message:",e),b([...w(),{role:"assistant",content:"Sorry, there was an error processing your message. Please try again."}])}finally{u(!1)}};return(0,s.jsx)(i,{children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 border-b dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["gpt"===m&&"Using: ".concat(x),"claude"===m&&"Using: ".concat(y),"gemini"===m&&"Using: Gemini Flash 2.0"]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>{let e=new CustomEvent("newChat",{detail:{model:m}});window.dispatchEvent(e)},className:"text-sm text-blue-500 hover:text-blue-700 dark:hover:text-blue-400",children:"New Chat"}),(0,s.jsx)("button",{onClick:()=>{confirm("Are you sure you want to clear the ".concat(m.toUpperCase()," chat history?"))&&b([])},className:"text-sm text-red-500 hover:text-red-700 dark:hover:text-red-400",children:"Clear Chat"})]})]}),(0,s.jsx)(c,{messages:w(),isLoading:d,modelType:m}),(0,s.jsx)(g,{onSendMessage:f,isLoading:d})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3656)}),_N_E=e.O()}]);